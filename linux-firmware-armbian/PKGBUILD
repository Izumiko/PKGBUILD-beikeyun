# PKGBUILD Maintainer: Izumiko <yosoro@outlook.com>

_debver=5.98
_imagename="armbian-firmware_${_debver}_all.deb"

pkgdesc="Linux firmware from armbian."
pkgname=linux-firmware-armbian
pkgver=${_debver}
pkgrel=2
arch=('any')
url="https://apt.armbian.com/pool/main/a/armbian-firmware/"
license=('GPL2')
options=('!strip')
provides=("linux-firmware=${pkgver}")
conflicts=('linux-firmware')
source=("https://apt.armbian.com/pool/main/a/armbian-firmware/${_imagename}")
sha256sums=('ffe19e5e5503b68f1e068621c9ad4affde3afc9d85ceb2585f9186f13a6f0ddf')
noextract=("${_imagename}")


prepare() {
  cd "${srcdir}"

  # extract the prebuilt kernel files
  mkdir -p linux-firmware/
  cp "${_imagename}" linux-firmware/
  cd linux-firmware/
  ar xf "${_imagename}"
  tar -xf data.tar.xz
}

package() {

  cd "${srcdir}/linux-firmware"
  mkdir -p "${pkgdir}/usr"
  cp -r lib "${pkgdir}/usr"

}
